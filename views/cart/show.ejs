<% layout("layouts/boilerplate") %>
<link rel="stylesheet" href="/css/cart.css" class="rel" />

<h1 class="mt-5">Shopping Cart</h1>

<div class="shopping-cart">
  <div class="column-labels">
    <label class="product-image">Image</label>
    <label class="product-details">Product</label>
    <label class="product-price">Price</label>
    <label class="product-quantity">Quantity</label>
    <label class="product-removal">Remove</label>
    <label class="product-line-price">Total</label>
  </div>

  <ul>
    <% cart.items.forEach(function(item) { %>
    <li>
      Name: <%= item.product.name %><br />
      Description: <%= item.product.description %><br />
      Price: <%= item.product.price %><br />
      Quantity: <%= item.quantity %>
    </li>
    <% }); %>
  </ul>
  <% let subTotal = 0; %> <% cart.items.forEach(function(item) { %>

  <div class="product">
    <div class="product-image">
      <img src="https://s.cdpn.io/3/dingo-dog-bones.jpg" />
    </div>
    <div class="product-details">
      <div class="product-title"><%= item.product.name %></div>
      <p class="product-description"><%= item.product.description %></p>
    </div>
    <div class="product-price"><%= item.product.price %></div>
    <div class="product-quantity">
      <input type="number" value="<%= item.quantity %>" min="1" />
    </div>
    <div class="product-removal">
      <button class="remove-product">Remove</button>
    </div>
    <div class="product-line-price"><%= (item.quantity * item.product.price).toFixed(2) %></div>
  </div>
  <% subTotal += item.quantity * item.product.price; %> <% }) %>

  <div class="totals">
    <div class="totals-item">
      <label>Subtotal</label>
      <div class="totals-value" id="cart-subtotal"><%= subTotal %></div>
    </div>
    <div class="totals-item">
      <label>Tax (5%)</label>
      <div class="totals-value" id="cart-tax"><%= (subTotal * .05).toFixed(2) %></div>
    </div>

    <div class="totals-item totals-item-total">
      <label>Grand Total</label>
      <div class="totals-value" id="cart-total"><%= (subTotal * 1.05).toFixed(2) %></div>
    </div>
  </div>

  <button class="checkout">Checkout</button>
</div>
